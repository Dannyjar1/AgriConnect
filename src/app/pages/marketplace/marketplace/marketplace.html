<!-- AgriConnect Marketplace - Dise√±o Moderno con TailwindCSS -->
<div class="min-h-screen bg-gradient-agri font-noto-sans">
  
  <!-- Header Navigation -->
  <header class="bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm">
    <div class="max-w-7xl mx-auto px-4 lg:px-6 flex items-center justify-between h-20">
      <!-- Logo -->
      <div class="flex items-center space-x-3">
        <div class="w-10 h-10 logo-image rounded-lg"></div>
        <span class="text-2xl font-bold text-agri-green-600 font-epilogue tracking-tight">AgriConnect</span>
      </div>
      
      <!-- Mobile Profile Icon - Visible on small screens -->
      <div class="md:hidden">
        <a (click)="navigateToProfile()" 
           class="text-gray-600 hover:text-agri-green-600 p-2 rounded-lg hover:bg-gray-50 transition-all cursor-pointer group"
           role="button"
           aria-label="Ir a mi perfil"
           title="Mi Perfil">
          <div class="w-8 h-8 bg-agri-green-100 rounded-full flex items-center justify-center group-hover:bg-agri-green-200 transition-all">
            <span class="material-icons text-lg text-agri-green-600 group-hover:text-agri-green-700">account_circle</span>
          </div>
        </a>
      </div>
      
      <!-- Navigation Menu -->
      <nav class="hidden md:flex items-center space-x-8" role="navigation">
        <a href="#" class="text-agri-green-600 font-semibold px-4 py-2 rounded-lg bg-agri-green-50 font-epilogue">Inicio</a>
        <a href="#" class="text-gray-600 hover:text-agri-green-600 font-medium px-4 py-2 rounded-lg hover:bg-gray-50 transition-all font-epilogue">Productos</a>
        <a href="#" class="text-gray-600 hover:text-agri-green-600 font-medium px-4 py-2 rounded-lg hover:bg-gray-50 transition-all font-epilogue">Productores</a>
        <!-- Profile Icon -->
        <a (click)="navigateToProfile()" 
           class="text-gray-600 hover:text-agri-green-600 p-2 rounded-lg hover:bg-gray-50 transition-all cursor-pointer group"
           role="button"
           aria-label="Ir a mi perfil"
           title="Mi Perfil">
          <div class="w-8 h-8 bg-agri-green-100 rounded-full flex items-center justify-center group-hover:bg-agri-green-200 transition-all">
            <span class="material-icons text-lg text-agri-green-600 group-hover:text-agri-green-700">account_circle</span>
          </div>
        </a>
      </nav>
    </div>
  </header>

  <!-- Main Content Area -->
  <main class="max-w-7xl mx-auto px-4 lg:px-6">
    
    <!-- Hero Search Section -->
    <section class="py-16 lg:py-24 text-center">
      <div class="max-w-4xl mx-auto">
        <h1 class="text-4xl lg:text-6xl font-black text-gray-900 mb-6 font-epilogue leading-tight">
          <span class="text-gradient-agri">Encuentra Productos</span> Frescos Locales
        </h1>
        <p class="text-xl lg:text-2xl text-gray-600 mb-12 max-w-3xl mx-auto leading-relaxed">
          Con√©ctate directamente con productores locales y recibe los productos m√°s frescos en tu puerta
        </p>
        
        <!-- Primary Search Bar -->
        <div class="mb-8">
          <form [formGroup]="searchForm" class="max-w-2xl mx-auto">
            <div class="relative">
              <span class="absolute left-6 top-1/2 transform -translate-y-1/2 text-gray-400 material-icons text-2xl">search</span>
              <input 
                type="text" 
                formControlName="searchTerm"
                placeholder="Busca frutas frescas, vegetales, l√°cteos..."
                class="w-full pl-16 pr-6 py-6 text-lg border-2 border-gray-200 rounded-2xl focus:ring-4 focus:ring-agri-green-100 focus:border-agri-green-500 transition-all duration-300 bg-white shadow-lg"
                aria-label="Buscar productos">
            </div>
          </form>
        </div>
        
        <!-- Custom Requirements Field -->
        <div class="max-w-2xl mx-auto">
          <form [formGroup]="searchForm" (ngSubmit)="onSubmitNeeds()">
            <div class="relative">
              <span class="absolute left-6 top-1/2 transform -translate-y-1/2 text-gray-400 material-icons text-xl">edit_note</span>
              <input 
                type="text" 
                formControlName="customNeed"
                placeholder="Necesito: 5kg tomates org√°nicos, vegetales sin pesticidas..."
                class="w-full pl-16 pr-20 py-4 border border-gray-300 rounded-xl focus:ring-4 focus:ring-agri-green-100 focus:border-agri-green-500 transition-all bg-white italic placeholder-gray-400"
                aria-label="Describe tus necesidades espec√≠ficas">
              <button type="submit" class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-agri-green-600 hover:bg-agri-green-700 text-white w-12 h-12 rounded-lg transition-all hover:scale-105">
                <span class="material-icons">send</span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </section>

    <!-- Categories Quick Filter -->
    <section class="py-8">
      <div class="max-w-4xl mx-auto text-center">
        <div class="flex flex-wrap justify-center gap-3">
          @for (category of categories(); track category) {
            <button 
              type="button"
              (click)="onCategorySelect(category)"
              [class]="selectedCategory() === category ? 
                'bg-agri-green-600 text-white border-agri-green-600' : 
                'bg-white text-gray-600 border-gray-300 hover:border-agri-green-500 hover:text-agri-green-600 hover:bg-agri-green-50'"
              class="px-6 py-3 rounded-full border font-medium transition-all duration-200 font-epilogue">
              {{ category }}
            </button>
          }
        </div>
      </div>
    </section>

    <!-- Products Grid Section -->
    <section class="py-12">
      <div class="max-w-6xl mx-auto">
        <div class="text-center mb-16">
          <h2 class="text-4xl font-bold text-gray-900 mb-4 font-epilogue">Productos Sugeridos Cerca de Ti</h2>
          <p class="text-xl text-gray-600 max-w-2xl mx-auto">
            Productos frescos de productores locales en tu zona
          </p>
        </div>
        
        @if (isLoading()) {
          <div class="text-center py-16">
            <div class="w-12 h-12 border-4 border-gray-200 border-t-agri-green-600 rounded-full animate-spin mx-auto mb-4"></div>
            <p class="text-xl text-gray-600">Buscando productos frescos para ti...</p>
          </div>
        }
        
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
          @if (filteredProducts$ | async; as products) {
            @if (products.length > 0) {
              @for (product of products; track product.id) {
                <div class="card card-hover hover-lift group">
                  <div class="relative aspect-w-4 aspect-h-3 overflow-hidden">
                    <img 
                      [src]="product.images[0] || 'assets/images/placeholder-product.svg'" 
                      [alt]="product.name" 
                      class="w-full h-64 object-cover product-img">
                    <div class="absolute top-4 left-4">
                      @if (product.certifications.length > 0) {
                        <span class="bg-agri-green-600 text-white px-3 py-1 rounded-lg text-xs font-semibold uppercase tracking-wide">
                          {{ product.certifications[0] }}
                        </span>
                      }
                    </div>
                  </div>
                  
                  <div class="p-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-2 font-epilogue leading-tight">{{ product.name }}</h3>
                    <p class="text-gray-600 mb-4 line-clamp-2">{{ product.description }}</p>
                    
                    <div class="flex justify-between items-center mb-6">
                      <span class="bg-gray-100 text-gray-600 px-3 py-1 rounded-lg text-sm font-medium">{{ product.category }}</span>
                      <span class="text-gray-500 text-sm">{{ product.availability }} available</span>
                    </div>
                    
                    <div class="flex justify-between items-center">
                      <div>
                        <span class="text-2xl font-bold text-agri-green-600 font-epilogue">${{ product.price.perUnit }}</span>
                        <span class="text-gray-500 text-sm ml-1">per unit</span>
                      </div>
                      <button class="bg-agri-green-600 hover:bg-agri-green-700 text-white font-semibold px-4 py-2 rounded-lg transition-all hover:-translate-y-0.5 flex items-center space-x-2 group-hover:shadow-lg">
                        <span class="material-icons text-lg">add_shopping_cart</span>
                        <span>Agregar al Carrito</span>
                      </button>
                    </div>
                  </div>
                </div>
              }
            } @else {
              <div class="col-span-full text-center py-20">
                <div class="text-8xl mb-8 opacity-60">üå±</div>
                <h3 class="text-2xl font-bold text-gray-700 mb-4 font-epilogue">No se encontraron productos</h3>
                <p class="text-gray-600 mb-8 max-w-md mx-auto">
                  Prueba ajustando tus criterios de b√∫squeda o navega por nuestras categor√≠as sugeridas
                </p>
                <button (click)="onClearFilters()" class="btn-primary">
                  Ver Todos los Productos
                </button>
              </div>
            }
          }
        </div>
      </div>
    </section>
    
  </main>
</div>