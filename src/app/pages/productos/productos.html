<!-- AgriConnect Productos - Página con SharedHeaderComponent -->
<div class="min-h-screen bg-gradient-agri font-noto-sans">
  
  <!-- Shared Header Component -->
  <app-shared-header currentPage="productos"></app-shared-header>

  <!-- Main Content Area -->
  <main class="max-w-7xl mx-auto px-4 lg:px-6 py-8">
    
    <!-- Page Title Section -->
    <section class="py-12 text-center">
      <div class="max-w-4xl mx-auto">
        <h1 class="text-4xl lg:text-6xl font-black text-gray-900 mb-6 font-epilogue leading-tight">
          <span class="text-gradient-agri">Productos</span> Frescos de Ecuador
        </h1>
        <p class="text-xl lg:text-2xl text-gray-600 mb-12 max-w-3xl mx-auto leading-relaxed">
          Descubre la variedad más amplia de productos agrícolas ecuatorianos, directo desde el campo hasta tu mesa
        </p>
      </div>
    </section>

    <!-- Categories Grid -->
    <section class="py-8">
      @if (isLoading()) {
        <div class="text-center py-16">
          <div class="w-12 h-12 border-4 border-gray-200 border-t-agri-green-600 rounded-full animate-spin mx-auto mb-4"></div>
          <p class="text-xl text-gray-600">Cargando productos frescos...</p>
        </div>
      } @else {
        @for (categoryData of productsByCategory(); track categoryData.category) {
          <div class="mb-16">
            <!-- Category Title -->
            <div class="text-center mb-12">
              <h2 class="text-3xl font-bold text-gray-900 mb-4 font-epilogue">{{ categoryData.category }}</h2>
              <div class="w-24 h-1 bg-agri-green-500 mx-auto rounded-full"></div>
            </div>
            
            <!-- Products Grid -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
              @for (product of categoryData.products; track product.id) {
                <div class="card card-hover hover-lift group cursor-pointer" 
                     (click)="navigateToProduct(product.id)">
                  <div class="relative aspect-w-4 aspect-h-3 overflow-hidden">
                    <img 
                      [src]="product.images[0] || 'assets/images/placeholder-product.svg'" 
                      [alt]="product.name" 
                      class="w-full h-64 object-cover product-img">
                    <div class="absolute top-4 left-4">
                      @if (product.certifications.length > 0) {
                        <span class="bg-agri-green-600 text-white px-3 py-1 rounded-lg text-xs font-semibold uppercase tracking-wide">
                          {{ product.certifications[0] }}
                        </span>
                      }
                    </div>
                    <div class="absolute top-4 right-4">
                      <span class="bg-white bg-opacity-90 text-gray-600 px-2 py-1 rounded text-xs font-medium">
                        {{ product.province }}
                      </span>
                    </div>
                  </div>
                  
                  <div class="p-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-2 font-epilogue leading-tight">{{ product.name }}</h3>
                    <p class="text-gray-600 mb-4 line-clamp-2">{{ product.description }}</p>
                    
                    <div class="flex justify-between items-center mb-6">
                      <span class="bg-gray-100 text-gray-600 px-3 py-1 rounded-lg text-sm font-medium">{{ product.category }}</span>
                      <span class="text-gray-500 text-sm">{{ product.availability }} disponible</span>
                    </div>
                    
                    <div class="flex justify-between items-center">
                      <div>
                        <span class="text-2xl font-bold text-agri-green-600 font-epilogue">${{ product.price.perUnit }}</span>
                        <span class="text-gray-500 text-sm ml-1">por {{ product.price.unit }}</span>
                      </div>
                      <button 
                        (click)="addToCart(product); $event.stopPropagation()"
                        class="bg-agri-green-600 hover:bg-agri-green-700 text-white font-semibold px-4 py-2 rounded-lg transition-all hover:-translate-y-0.5 flex items-center space-x-2 group-hover:shadow-lg">
                        <span class="material-icons text-lg">add_shopping_cart</span>
                        <span class="hidden sm:inline">Agregar</span>
                      </button>
                    </div>
                  </div>
                </div>
              }
            </div>
          </div>
        }
      }
    </section>
    
  </main>
</div>

<!-- Custom styles specific to this page -->
<style>
.logo-image {
  background-image: url('/assets/images/agriconnect-logo.svg');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: transparent;
}

.text-gradient-agri {
  background: linear-gradient(135deg, var(--color-agri-green-600), var(--color-agri-green-400));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.card-hover {
  transition: all 0.3s ease;
}

.card-hover:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 10px 10px -5px rgb(0 0 0 / 0.04);
}

.hover-lift {
  transition: transform 0.3s ease;
}

.hover-lift:hover {
  transform: translateY(-2px);
}

.product-img {
  transition: transform 0.3s ease;
}

.group:hover .product-img {
  transform: scale(1.05);
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
</style>